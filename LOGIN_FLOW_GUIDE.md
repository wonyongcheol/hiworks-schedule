# 하이웍스 2단계 로그인 플로우 가이드

## 개요

하이웍스 로그인은 2단계 프로세스로 구성되어 있습니다:
1. **1단계**: 아이디 입력 및 제출
2. **2단계**: 비밀번호 입력 및 최종 로그인

## 로그인 플로우 상세

### 1단계: 아이디 입력 및 제출

1. **아이디 입력란 찾기**
   - 다양한 선택자로 아이디 입력란을 찾습니다:
     - `mantine-iajo3p2bo` (원래 ID)
     - `[id^='mantine-']` (mantine- 패턴)
     - `input[type='text'], input[type='email']` (타입 기반)
     - placeholder에 '아이디', 'ID', '이메일' 포함된 input

2. **아이디 입력**
   - 입력란을 찾으면 기존 내용을 지우고 아이디를 입력합니다.

3. **제출 버튼 찾기 및 클릭**
   - 다양한 제출 버튼을 찾습니다:
     - `button[type='submit']`
     - "다음", "계속", "확인", "진행" 텍스트가 포함된 버튼
   - 버튼을 찾지 못하면 폼 submit을 시도합니다.

4. **페이지 전환 대기**
   - 제출 후 2초간 페이지 전환을 기다립니다.

### 2단계: 비밀번호 입력 및 최종 로그인

1. **비밀번호 입력란 찾기**
   - 다양한 선택자로 비밀번호 입력란을 찾습니다:
     - `input[name='password']`
     - `input[type='password']`
     - placeholder에 '비밀번호' 포함된 input

2. **비밀번호 입력**
   - 입력란을 찾으면 기존 내용을 지우고 비밀번호를 입력합니다.

3. **최종 로그인 버튼 찾기 및 클릭**
   - 다양한 로그인 버튼을 찾습니다:
     - `button[type='submit']`
     - "로그인", "확인", "완료" 텍스트가 포함된 버튼
   - 버튼을 찾지 못하면 폼 submit을 시도합니다.

## 로그인 성공 확인

로그인 성공 여부는 다음 방법으로 확인합니다:

1. **URL 변경 확인**
   - 로그인 성공 시 일반적으로 URL에서 'login'이 제거됩니다.
   - `if "login" not in current_url.lower():`

2. **페이지 제목 확인**
   - 로그인 후 페이지 제목이 변경되는지 확인합니다.

3. **대기 시간**
   - 로그인 후 3초간 페이지 로딩을 기다립니다.

## 오류 처리

### 아이디 입력란을 찾을 수 없는 경우
- 여러 선택자 방법을 순차적으로 시도합니다.
- 모든 방법이 실패하면 로그에 상세한 오류 정보를 기록합니다.

### 제출 버튼을 찾을 수 없는 경우
- 폼 submit을 대체 방법으로 시도합니다.
- submit도 실패하면 오류를 반환합니다.

### 비밀번호 입력란을 찾을 수 없는 경우
- 2단계 페이지로 전환되지 않았을 가능성이 있습니다.
- 1단계에서 문제가 발생했을 수 있습니다.

### 로그인 버튼을 찾을 수 없는 경우
- 폼 submit을 대체 방법으로 시도합니다.
- submit도 실패하면 오류를 반환합니다.

## 디버깅 정보

### 로그 메시지
프로그램은 각 단계에서 상세한 로그를 출력합니다:

```
2025-07-12 13:30:27 - hiworks_schedule - INFO - 2단계 로그인 프로세스를 시작합니다.
2025-07-12 13:30:27 - hiworks_schedule - INFO - 1단계: 아이디 입력 및 제출
2025-07-12 13:30:27 - hiworks_schedule - INFO - 아이디 입력란을 찾는 중...
2025-07-12 13:30:27 - hiworks_schedule - INFO - 아이디 입력란을 CSS_SELECTOR: [id^='mantine-']로 찾았습니다.
2025-07-12 13:30:27 - hiworks_schedule - INFO - 아이디 입력 완료
2025-07-12 13:30:27 - hiworks_schedule - INFO - 아이디 제출 버튼을 찾는 중...
2025-07-12 13:30:27 - hiworks_schedule - INFO - 제출 버튼을 XPATH: //button[@type='submit']로 찾았습니다.
2025-07-12 13:30:27 - hiworks_schedule - INFO - 제출 버튼 클릭 완료
2025-07-12 13:30:27 - hiworks_schedule - INFO - 페이지 전환을 기다리는 중...
2025-07-12 13:30:29 - hiworks_schedule - INFO - 2단계: 비밀번호 입력 및 최종 로그인
2025-07-12 13:30:29 - hiworks_schedule - INFO - 비밀번호 입력란을 찾는 중...
2025-07-12 13:30:29 - hiworks_schedule - INFO - 비밀번호 입력란을 XPATH: //input[@type='password']로 찾았습니다.
2025-07-12 13:30:29 - hiworks_schedule - INFO - 비밀번호 입력 완료
2025-07-12 13:30:29 - hiworks_schedule - INFO - 최종 로그인 버튼을 찾는 중...
2025-07-12 13:30:29 - hiworks_schedule - INFO - 로그인 버튼을 XPATH: //button[@type='submit']로 찾았습니다.
2025-07-12 13:30:29 - hiworks_schedule - INFO - 로그인 버튼 클릭 완료
2025-07-12 13:30:32 - hiworks_schedule - INFO - 로그인 성공으로 판단됩니다.
```

### 페이지 정보
로그인 후 현재 페이지의 정보를 확인할 수 있습니다:
- URL
- 페이지 제목
- 로그인 상태
- 페이지 소스 미리보기

## 문제 해결

### 로그인이 실패하는 경우
1. **네트워크 연결 확인**: 인터넷 연결이 안정적인지 확인
2. **자격 증명 확인**: 아이디와 비밀번호가 정확한지 확인
3. **로그 확인**: 상세한 로그를 통해 어느 단계에서 실패했는지 확인
4. **브라우저 확인**: Chrome 브라우저가 최신 버전인지 확인

### 특정 단계에서 멈추는 경우
1. **1단계에서 멈춤**: 아이디 입력란을 찾지 못하는 경우
2. **제출 후 멈춤**: 2단계 페이지로 전환되지 않는 경우
3. **비밀번호 입력에서 멈춤**: 비밀번호 입력란을 찾지 못하는 경우

### 선택자 업데이트
하이웍스 웹사이트가 업데이트되어 기존 선택자가 작동하지 않는 경우:
1. 개발자 도구로 새로운 선택자 확인
2. `src/scraper/hiworks_scraper.py` 파일의 선택자 목록 업데이트
3. 새로운 선택자를 기존 목록에 추가

## 기술적 세부사항

### 사용된 기술
- **Selenium WebDriver**: 웹 자동화
- **Explicit Wait**: 요소가 나타날 때까지 대기
- **Multiple Selectors**: 다양한 선택자로 요소 찾기
- **Fallback Methods**: 주 방법 실패 시 대체 방법 사용

### 성능 최적화
- **명시적 대기**: 불필요한 대기 시간 최소화
- **선택자 우선순위**: 가장 정확한 선택자부터 시도
- **오류 처리**: 각 단계별 상세한 오류 정보 제공 